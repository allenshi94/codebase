/*
* CSDN ÁôªÂΩïÊ°Ü
* Copyright 2012, zhuhz@csdn.net
* Date: 2012-6-6
* 
* Ë∞ÉÁî®Ôºöcsdn.showLogin(callback);
*
* Ëé∑ÂèñÂΩìÂâçÁôªÂΩïÁî®Êà∑ÂêçÔºàÂèØÁî®‰∫éÂà§Êñ≠Áî®Êà∑ÊòØÂê¶Â§Ñ‰∫éÁôªÂΩïÁä∂ÊÄÅÔºâÔºöcsdn.getCookie('UserName')
*/
var csdn = window.csdn || function () { };

csdn.domain = "passport.csdn.net";
csdn.doing = false;
csdn.$ = function (id) {
    return document.getElementById(id);
};
csdn.loginBack = null;
csdn.showLogin = function (callback) {

    var div = document.createElement("DIV");
    div.id = "csdn_divh";
    //div.style.marginLeft = "-200px";
    div.style.marginTop = -75 + (document.documentElement.scrollTop || document.body.scrollTop) + "px";

    // var title = 'ÁôªÂΩï<a class="close" href="javascript:void(0);" onclick="javascript:csdn.closeLogin();return false;" title="ÂÖ≥Èó≠Á™óÂè£">[X]</a>';
    var title = '';
    var body = csdn.loginForm();
    var bottom = '';
    var s = csdn.openBox().replace('#title#', title).replace('#body#', body);
    div.innerHTML = s;

    csdn.shieldBody();
    document.body.appendChild(div);

    var un = csdn.getCookie("UN");
    if (un) {
        csdn.$('u').value = un;
        csdn.$('p').focus();
    }
    else {
        csdn.$('u').focus();
    }
    csdn.$('u').onkeypress =
    csdn.$('p').onkeypress = function (ev) {
        if (csdn.isEnter(ev)) {
            csdn.login();
        }
    };
    csdn.loginBack = callback;
};
csdn.closeLogin = function () {
    document.body.removeChild(csdn.$('csdn_divh'));
    document.body.removeChild(csdn.$('csdn_shield'));
};
csdn.shieldBody = function () {
    var shield = document.createElement("DIV");
    shield.id = "csdn_shield";
    var h1 = document.documentElement.clientHeight;
    var h2 = document.documentElement.scrollHeight;
    shield.style.height = Math.max(h1, h2) + "px";
    shield.style.filter = "alpha(opacity=0)";
    shield.style.opacity = 0;
    document.body.appendChild(shield);

    csdn.setOpacity = function (obj, opacity) {
        if (opacity >= 1) opacity = opacity / 100;
        try { obj.style.opacity = opacity; } catch (err) { }
        try {
            if (obj.filters.length > 0 && obj.filters("alpha")) {
                obj.filters("alpha").opacity = opacity * 150;
            } else {
                obj.style.filter = "alpha(opacity=\"" + (opacity * 150) + "\")";
            }
        } catch (err) { }
    };
    var c = 0;
    csdn.doAlpha = function () {
        c += 2;
        if (c > 20) { clearInterval(ad); return 0; }
        csdn.setOpacity(shield, c);
    };
    var ad = setInterval("csdn.doAlpha()", 1);
};
csdn.setStyle = function () {
    var lk = document.createElement("LINK");
    lk.type = "text/css";
    lk.rel = "stylesheet";
    lk.href = location.protocol + "//" + csdn.domain + "/content/loginbox/style.css?r=" + (new Date().getTime());
    var head = document.getElementsByTagName("head")[0];
    head.appendChild(lk);
};
csdn.isEnter = function (ev) {
    ev = ev || window.event;
    var code = (ev.keyCode || ev.which);
    return (code == 10 || code == 13);
};
csdn.getCookie = function (name) {
    var ck = document.cookie.match(new RegExp("(^| )" + name + "=([^;]*)(;|$)"));
    if (ck) return ck[2];
    else return null;
};
csdn.setCookie = function (name, value, expires) {
    if (expires) expires = '; expires=' + new Date(expires).toUTCString();
    else expires = '';
    var path = '; path=/';
    var domain = '; domain=' + document.domain.replace('www.', '');

    document.cookie = [name, '=', encodeURIComponent(value), expires, path, domain].join('');
}

csdn.openBox = function () {
    var text =
         "<div class='boxbody'>#body#</div>"

    return text;
};
csdn.loginForm = function () {
    var fromurl = encodeURIComponent(location.href);
    var text = "<div class='csdn_loginbox' style='z-index: 100'>"
+ "<div class='login_content'>"

+ "<input name='close' type='button' class='close'  onclick='javascript:csdn.closeLogin();return false;'  />"
+ "<p class='point' id='sperr'></p>"
+ "<input name='user_id'  id='u'  type='text' class='user_id' placeholder='Áî®Êà∑ID/Ê≥®ÂÜåÈÇÆÁÆ±' />"
+ "<input name='password' id='p' type='password' class='password' placeholder='ÂØÜÁ†Å'/ >"
+ "<label><p class='remember clearfix'><input name='checkbox'  id='chkre' type='checkbox' value='checkbox' />ËÆ∞‰ΩèÊàë‰∏ÄÂë®</p></label>"
+ "<div class='pw_lg'>"
+ "<a href='https://" + csdn.domain + "/account/forgotpassword' target='_blank' >ÂøòËÆ∞ÂØÜÁ†Å</a>|<a href='https://" + csdn.domain + "/account/register' target='_blank' class='pw_a'>Ê≥®ÂÜå</a>"
+ "</div>"
+ "<input name='button' type='button' onclick='javascript:csdn.login();return false;' value='Áôª  ÂΩï' class='login_bt'/>"
+ "<div class='lg_3 clearfix'>"
+ "<a href='https://" + csdn.domain + "/auth/baidu?from=" + fromurl + "' target='_blank' class='baidu'></a>"
+ "<a href='https://" + csdn.domain + "/auth/Github?from=" + fromurl + "' target='_blank' class='github'></a>"
+ "<a href='https://" + csdn.domain + "/auth/qq?from=" + fromurl + "' target='_blank' class='qq'></a>"
+ "<a href='https://" + csdn.domain + "/auth/sinat?from=" + fromurl + "' target='_blank' class='weibo'></a>"
+ "Á¨¨‰∏âÊñπÁôªÂΩïÔºö"
+ "</div></div>"
+ "<iframe frameborder='no' allowtransparency='yes' style='position: absolute; width:100%; height: 311px; left: 0; top: 100px; border: 0; z-index: -1;'>"
+ "</div>";


    return text;
};

csdn.login = function () {
    if (csdn.doing) return;
    var u = csdn.$('u');
    var p = csdn.$('p');
    var er = csdn.$('sperr');
    if (!u.value) {
        er.innerHTML = '* ËØ∑ËæìÂÖ•Áî®Êà∑Âêç/ÈÇÆÁÆ±„ÄÇ';
        return;
    }
    if (!p.value) {
        er.innerHTML = '* ËØ∑ËæìÂÖ•ÂØÜÁ†Å„ÄÇ';
        return;
    }
    csdn.doing = true;
    er.innerHTML = 'Ê≠£Âú®ÁôªÂΩï...';
    var url = location.protocol + '//' + csdn.domain + '/ajax/accounthandler.ashx';
    var data = 't=log&u=' + encodeURIComponent(u.value)
        + '&p=' + encodeURIComponent(p.value)
        + '&remember=' + (csdn.$('chkre').checked ? 1 : 0)
        + '&callback=csdn.login_back'
        + '&r=' + (new Date().getTime());

    csdn.post(url + '?' + data);
};
csdn.login_back = function (data) {
    if (data.status) {
        var userName = data.data.userName;
        var userInfo = data.data.encryptUserInfo;
        var exp = csdn.$('chkre').checked ? 7 : 0;
        var url = location.protocol + '//' + csdn.domain + '/home/ssoindex'
            + '?userName=' + encodeURIComponent(userName)
            + '&userInfo=' + encodeURIComponent(userInfo)
            + '&exp=' + exp;

        csdn.load_frm(url, csdn.login_ok(data));
    } else {
        if (data.error.indexOf("ÊøÄÊ¥ª") > -1) {
            csdn.$('sperr').innerHTML = '* Ë¥¶Êà∑Êú™ÊøÄÊ¥ªÔºåËØ∑ÂÖà<a href="https://' + csdn.domain + '/account/active?from=' + encodeURIComponent(location + '') + '" target=_blank>ÊøÄÊ¥ª</a>„ÄÇ';
        } else {
            csdn.$('sperr').innerHTML = '* ' + data.error;
        }
        csdn.doing = false;
    }
};
csdn.login_ok = function (data) {
    csdn.doing = false;
    csdn.$('sperr').innerHTML = '<span style="color:green;">ÁôªÂΩïÊàêÂäüÔºÅ</span>';
    if (csdn.loginBack) csdn.loginBack(data);
    csdn.closeLogin();
};
csdn.post = function (url, callback) {
    var sc = document.createElement("script");
    sc.type = 'text/javascript';
    sc.async = true;
    sc.src = url;
    if (callback) {
        if (sc.onload) sc.onload = callback;
        else sc.onreadystatechange = callback;
    }
    document.body.appendChild(sc);
};
csdn.arr_isloaded = [];
csdn.load_frm = function (url, loaded) {
    var idx = csdn.arr_isloaded.length;
    csdn.arr_isloaded[idx] = false;
    var frm = document.createElement("iframe");
    frm.style.width = '1px';
    frm.style.height = '1px';
    frm.style.visibility = 'hidden';
    frm.src = url;
    if (loaded) {
        var call = function () {
            if (!csdn.arr_isloaded[idx]) {
                csdn.arr_isloaded[idx] = true;
                loaded();
            }
        };
        if (frm.onreadystatechange) {
            frm.onreadystatechange = call;
        } else {
            frm.onload = call;
        }
        setTimeout(call, 5000);
    }
    document.body.appendChild(frm);
};
/*Âä†ËΩΩÊ†∑ÂºèË°®Âçï*/
(function () {
    if (typeof jQuery != 'undefined') {
        jQuery(csdn.setStyle);
    } else {
        var ld = window.onload;
        window.onload = function () {
            if (ld) ld();
            csdn.setStyle();
        };
    }
})();


¸Qﬁ7ï      XÂXÊ=ÿÜXY   D:https://passport.csdn.net/content/loginbox/login.js?_=1476926948288 necko:classified 1 security-info FnhllAKWRHGAlo+ESXykKAAAAAAAAAAAwAAAAAAAAEaphjojH6pBabDSgSnsfLHeAAQAAgAAAAAAAAAAAAAAAAAAAAAB4vFIJp5wRkeyPxAQ9RJGKPqbqVvKO0mKuIl8ec8o/uhmCjImkVxP+7sgiYWmMt8F+O2DZM7ZTG6GukivU8OT5gAAAAAAAAUIMIIFBDCCA+ygAwIBAgIQMN/BgXL4Nb4xmIGsJdLaSjANBgkqhkiG9w0BAQsFADB+MQswCQYDVQQGEwJVUzEdMBsGA1UEChMUU3ltYW50ZWMgQ29ycG9yYXRpb24xHzAdBgNVBAsTFlN5bWFudGVjIFRydXN0IE5ldHdvcmsxLzAtBgNVBAMTJlN5bWFudGVjIENsYXNzIDMgU2VjdXJlIFNlcnZlciBDQSAtIEc0MB4XDTE1MDkyODAwMDAwMFoXDTE4MTEyNjIzNTk1OVowgZAxCzAJBgNVBAYTAkNOMQ8wDQYDVQQIDAbljJfkuqwxDzANBgNVBAcMBuWMl+S6rDEzMDEGA1UECgwq5YyX5Lqs5Yib5paw5LmQ55+l5L+h5oGv5oqA5pyv5pyJ6ZmQ5YWs5Y+4MRUwEwYDVQQLDAzkuqflk4HnoJTlj5ExEzARBgNVBAMMCiouY3Nkbi5uZXQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCDcISJ1VE0K5ntpGR38UyVevbwhOKrweZCxGjSUgmg7bHBYNWvJvliwB4oXzg4c7DypdKavqMPBT/HIxd13OGZEy8MFp2zfyTc0Oh974w/8hnXSE2dMFdlP+AGLuBSGakXStvUb0+T+1DukDF9a9DvGcFfnYNXtv0lWDlDUMp7gEkfspV4Y14t2dZLeYLOUl9W8aN3KI7RgAm+lK8VUMufGleWgop6x9MAyk9KdPRJ0BtILfqAjAIo6K0HdjSRy5R6pXRjFc8Pc4Ln0eKjt8WsHHak33Ie7PHeGmzDzNQ6rfsJKZff9eHbHWVZUNofXd29LiC9WEqk8Wf3/HmjBopLAgMBAAGjggFpMIIBZTAfBgNVHREEGDAWggoqLmNzZG4ubmV0gghjc2RuLm5ldDAJBgNVHRMEAjAAMA4GA1UdDwEB/wQEAwIFoDArBgNVHR8EJDAiMCCgHqAchhpodHRwOi8vc3Muc3ltY2IuY29tL3NzLmNybDBhBgNVHSAEWjBYMFYGBmeBDAECAjBMMCMGCCsGAQUFBwIBFhdodHRwczovL2Quc3ltY2IuY29tL2NwczAlBggrBgEFBQcCAjAZDBdodHRwczovL2Quc3ltY2IuY29tL3JwYTAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwHwYDVR0jBBgwFoAUX2DPYZBV34RDFIpgKrL1evRDGO8wVwYIKwYBBQUHAQEESzBJMB8GCCsGAQUFBzABhhNodHRwOi8vc3Muc3ltY2QuY29tMCYGCCsGAQUFBzAChhpodHRwOi8vc3Muc3ltY2IuY29tL3NzLmNydDANBgkqhkiG9w0BAQsFAAOCAQEAhvsdiPeDrb2BnFBo3VIjI/tmfrdR0RL1r9e28BKVe7wKRKrsUPHIf/IzEHt4rktDJ1NheVsOQGp0kTvcJ1hw3wHmnpTbgL+U7YZ6flyr0fM1KALTJU7eoqFkXvQ9lYHfGkdI/e6wlIEJosU8GDiKY6bQXsk5gPKgo8Sl/RhmmctGnTK735TnSdq25P9MPZFtnuRqX1o6i8JvHNbhTIiBsxcwRHouTbGQA/pEqWbEj44ogOnT+fe7QiBYCM+fici6c0yLSlB4GIbbHiHeLMnjMBgMRVMDxY418e33qM8y2kf3NznArCqn6qY8rdJFEEfQ7A7SatWbMegZ2v1KsNDhjcAUAAMAAAAAAQEAAA== request-method GET response-head HTTP/1.1 200 OK
Server: openresty
Date: Thu, 20 Oct 2016 01:29:10 GMT
Content-Type: application/javascript;charset=UTF-8
Content-Length: 8745
Accept-Ranges: bytes
Etag: W/"8745-1476775515000"
Last-Modified: Tue, 18 Oct 2016 07:25:15 GMT
 uncompressed-len 0   ")